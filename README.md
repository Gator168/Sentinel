# Sentinel

Remote server guardian - é€šè¿‡ MCP åè®®è¿œç¨‹ç®¡ç† PM2 è¿›ç¨‹å’Œæ‰§è¡Œ Shell å‘½ä»¤ã€‚

## ç®€ä»‹

Sentinel æ˜¯ä¸€ä¸ªè½»é‡çº§ MCP Serverï¼Œéƒ¨ç½²åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œè®© AI ç¼–ç¨‹åŠ©æ‰‹ï¼ˆå¦‚ Claude Codeï¼‰èƒ½å¤Ÿï¼š

- ğŸš€ è¿œç¨‹ç®¡ç† PM2 è¿›ç¨‹ï¼ˆæœºå™¨å­¦ä¹ è®­ç»ƒä»»åŠ¡ï¼‰
- ğŸ’» æ‰§è¡Œå—é™çš„ Shell å‘½ä»¤æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€
- ğŸ” é€šè¿‡ Token è®¤è¯é˜²æ­¢æœªæˆæƒè®¿é—®

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æœ¬åœ°ç¯å¢ƒ        â”‚          HTTP + SSE          â”‚   è¿œç¨‹æœåŠ¡å™¨ (å†…ç½‘)   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Claude Code  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€ POST /message â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚   Sentinel    â”‚  â”‚
â”‚  â”‚               â”‚â—€â”€â”¼â”€â”€â”€â”€â”€â”€â”€ SSE /sse â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚   :9001       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚          â”‚          â”‚
                                                     â”‚    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”    â”‚
                                                     â”‚    â–¼           â–¼    â”‚
                                                     â”‚  â”Œâ”€â”€â”€â”       â”Œâ”€â”€â”€â”  â”‚
                                                     â”‚  â”‚PM2â”‚       â”‚SH â”‚  â”‚
                                                     â”‚  â””â”€â”€â”€â”˜       â””â”€â”€â”€â”˜  â”‚
                                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-repo/sentinel.git
cd sentinel

# å®‰è£…ä¾èµ–
npm install

# æ„å»º
npm run build
```

## é…ç½®

åˆ›å»º `.env` æ–‡ä»¶æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
# è®¤è¯ä»¤ç‰Œï¼ˆå¿…å¡«ï¼‰
SENTINEL_TOKEN="your-secret-token"

# å…è®¸è®¿é—®çš„ç›®å½•ï¼Œé€—å·åˆ†éš”ï¼ˆå¿…å¡«ï¼‰
SENTINEL_ALLOWED_PATHS="/home/user/projects,/data/datasets"

# æœåŠ¡ç«¯å£ï¼ˆå¯é€‰ï¼Œé»˜è®¤ 9001ï¼‰
SENTINEL_PORT=9001
```

## ä½¿ç”¨

### å¯åŠ¨æœåŠ¡

```bash
npm start
```

### åœ¨ Claude Code ä¸­é…ç½®

åœ¨ `~/.claude.json` ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "sentinel": {
      "type": "sse",
      "url": "http://your-server-ip:9001/sse"
    }
  }
}
```

## MCP Tools

### PM2 è¿›ç¨‹ç®¡ç†

| Tool | æè¿° |
|------|------|
| `pm2_list` | åˆ—å‡ºæ‰€æœ‰ PM2 è¿›ç¨‹ |
| `pm2_start` | åˆ›å»ºå¹¶å¯åŠ¨ä»»åŠ¡ |
| `pm2_stop` | åœæ­¢è¿›ç¨‹ |
| `pm2_restart` | é‡å¯è¿›ç¨‹ |
| `pm2_delete` | åˆ é™¤è¿›ç¨‹ |
| `pm2_logs` | è·å–è¿›ç¨‹æ—¥å¿— |

### Shell å‘½ä»¤

| Tool | æè¿° |
|------|------|
| `shell_exec` | æ‰§è¡Œå—é™ Shell å‘½ä»¤ |

æ”¯æŒçš„å‘½ä»¤ç™½åå•ï¼š
```
ls, pwd, tree, cat, head, tail, df, free, nvidia-smi, ps
```

## å®‰å…¨ç‰¹æ€§

- **Token è®¤è¯**ï¼šæ¯æ¬¡è°ƒç”¨éœ€éªŒè¯ Token
- **å‘½ä»¤ç™½åå•**ï¼šä»…å…è®¸é¢„å®šä¹‰çš„å®‰å…¨å‘½ä»¤
- **è·¯å¾„æ²™ç®±**ï¼šé™åˆ¶æ–‡ä»¶è®¿é—®åœ¨æŒ‡å®šç›®å½•å†…
- **æ³¨å…¥é˜²æŠ¤**ï¼šç¦æ­¢ç®¡é“ã€é‡å®šå‘ã€å‘½ä»¤æ›¿æ¢ç­‰

## å¼€å‘

```bash
# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run dev

# æ„å»º
npm run build

# è¿è¡Œ
npm start
```

## License

Apache License 2.0
